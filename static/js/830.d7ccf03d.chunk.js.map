{"version":3,"file":"static/js/830.d7ccf03d.chunk.js","mappings":"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","sources":["../../src/loader.js","../../src/createWithFetchLang.js","../../src/index.js"],"sourcesContent":["export const message = {};\n\nconst loader = (locale, localeMessage, namespace) => {\n  if (!message[locale]) {\n    message[locale] = {};\n  }\n  message[locale][namespace || 'global'] = Object.assign({}, message[locale][namespace || 'global'], localeMessage);\n  return message;\n};\n\nexport const messagesLoader = (messages, namespace) => {\n  Object.keys(messages).forEach(locale => {\n    if (!message[locale]) {\n      message[locale] = {};\n    }\n    message[locale][namespace || 'global'] = Object.assign({}, message[locale][namespace || 'global'], messages[locale]);\n  });\n};\n\nexport default loader;\n","import Fetch from '@kne/react-fetch';\nimport { useGlobalValue, usePreset } from '@kne/global-context';\nimport localeLoader, { messagesLoader, message } from './loader';\nimport { IntlProvider } from 'react-intl';\nimport React, { forwardRef } from 'react';\n\nconst argsParse = (...args) => {\n  if (typeof args[0] === 'object' && typeof args[0].defaultLocale === 'string') {\n    return Object.assign({}, args[0]);\n  }\n\n  return { defaultLocale: args[0], defaultMessage: args[1], namespace: args[2] };\n};\n\nconst createWithFetchLang = (...args) => {\n  const { defaultLocale, defaultMessage, namespace, messages } = argsParse(...args);\n  defaultMessage && localeLoader(defaultLocale, defaultMessage, namespace);\n  messages && messagesLoader(messages, namespace);\n  return WrappedComponents =>\n    forwardRef(({ locale: propsLocale, ...props }, ref) => {\n      const { apis } = usePreset();\n      const contextLocal = useGlobalValue('locale');\n      const locale = propsLocale || contextLocal || defaultLocale || 'zh-CN';\n      const currentNamespace = namespace || 'global';\n      const messages = message[locale]?.[currentNamespace];\n      const defaultLocalMessage = message[defaultLocale || 'zh-CN']?.[currentNamespace];\n      if (apis?.localeMessage && !(messages && Object.keys(messages).length > 0) && defaultLocalMessage && Object.keys(defaultLocalMessage).length > 0) {\n        return (\n          <Fetch\n            {...Object.assign({}, apis.localeMessage, { data: { locale, namespace: currentNamespace, defaultLang: defaultLocalMessage } })}\n            cache=\"intl-fetch-lang \"\n            render={({ data }) => {\n              messagesLoader({ [locale]: data }, currentNamespace);\n              const messages = message[locale]?.[currentNamespace];\n              return (\n                <IntlProvider messages={messages} locale={locale}>\n                  <WrappedComponents {...props} ref={ref} />\n                </IntlProvider>\n              );\n            }}\n          />\n        );\n      }\n\n      return (\n        <IntlProvider messages={messages} locale={locale}>\n          <WrappedComponents {...props} ref={ref} />\n        </IntlProvider>\n      );\n    });\n};\n\nexport default createWithFetchLang;\n","import React, { forwardRef } from 'react';\nimport localeLoader, { message, messagesLoader } from './loader';\nimport { IntlProvider, createIntl as createIntlBase, useIntl } from 'react-intl';\nimport { useGlobalValue } from '@kne/global-context';\nimport createWithFetchLang from './createWithFetchLang';\n\nconst withIntlProvider = WrappedComponents =>\n  forwardRef(({ locale: propsLocale, namespace, ...props }, ref) => {\n    const contextLocal = useGlobalValue('locale');\n    const locale = propsLocale || contextLocal || 'zh-CN';\n    return (\n      <IntlProvider messages={message[locale]?.[namespace || 'global']} locale={locale}>\n        <WrappedComponents {...props} ref={ref} />\n      </IntlProvider>\n    );\n  });\n\nconst argsParse = (...args) => {\n  if (typeof args[0] === 'object' && typeof args[0].defaultLocale === 'string') {\n    return Object.assign({}, args[0]);\n  }\n\n  return { defaultLocale: args[0], defaultMessage: args[1], namespace: args[2] };\n};\n\nexport const createIntlProvider = (...args) => {\n  const withIntlProvider = createWithFetchLang(...args);\n  const InnerComponent = ({ children }) => {\n    const intl = useIntl();\n    return children(intl);\n  };\n  return withIntlProvider(({ locale: propsLocale, children }) => {\n    return typeof children === 'function' ? <InnerComponent>{children}</InnerComponent> : children;\n  });\n};\n\nexport const createWithIntlProvider = createWithFetchLang;\n\nexport * from 'react-intl';\n\nexport const createIntl = ({ locale = 'zh-CN', message: propsMessage, namespace }) => {\n  propsMessage && localeLoader(locale, propsMessage, namespace);\n  return createIntlBase({ locale, messages: message[locale]?.[namespace || 'global'] });\n};\n\nexport { localeLoader, IntlProvider };\n\nexport default createIntl;\n"],"names":["message","loader","locale","localeMessage","namespace","Object","assign","messagesLoader","messages","keys","forEach","createWithFetchLang","defaultLocale","defaultMessage","_len","arguments","length","args","Array","_key","argsParse","WrappedComponents","forwardRef","_ref","ref","_message$locale","_message","propsLocale","props","_objectWithoutPropertiesLoose","_excluded","apis","usePreset","contextLocal","useGlobalValue","currentNamespace","defaultLocalMessage","React","Fetch","_extends","data","defaultLang","cache","render","_ref2","_message$locale2","IntlProvider","createIntlProvider","withIntlProvider","InnerComponent","_ref3","children","useIntl","_ref4","createWithIntlProvider","createIntl","_ref5","_locale","propsMessage","_message$_locale","createIntl$1"],"ignoreList":[],"sourceRoot":""}